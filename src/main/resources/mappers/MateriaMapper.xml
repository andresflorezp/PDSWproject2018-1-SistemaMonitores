<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
<mapper namespace="edu.eci.pdsw.sampleprj.dao.mybatis.mappers.MateriaMapper">
    <select parameterType="map" id="consultarMateria" resultMap="materiaResult">
        select
            materia.materia_id,
            materia.materia_nombre as m_nombre,
            materia.materia_nemonico as m_nemonico,
            materia.creditos as m_creditos,
            materia.horas_monitoria_curso as m_horas_monitoria_curso,

            tema.temaID tema_temaID,
            tema.topic as tema_topic,
            tema.descripcion as tema_descripcion,

            grupo.grupoID,
            grupo.grupo_nombre as gr_grupo_nombre,
            grupo.numeroEstudiante as gr_numeroestudiante,

        FROM materia join tema on (tema.materia_materia_id = materia.materia_id)
            join grupo on (grupo.materia_materia_id = materia.materia_id)
            join asesoriamonitor on ()
        where materia.materia_id = #{codId}
    </select>

    <insert id="insertarMateria" parameterType="map" useGeneratedKey="true">
        INSERT INTO MATERIA 
        VALUES (#{materia.materia_id},#{materia.materia_nombre},#{materia.materia_nemonico},#{materia.creditos},#{materia.horas_monitorias_curs})
    </insert>

    <resultMap type='Materia' id='materiaResult'>
        <id property='materia_id' column='materia_id'></id>
        <result property='materia_nombre' column='materia_nombre'></result>
        <result property='materia_nemonico' column='materia_nemonico'></result>
        <result property='creditos' column='creditos'></result>
        <result property='horas_monitorias_curso' column='horas_monitorias_curso'></result>
    </resultMap>

</mapper>
