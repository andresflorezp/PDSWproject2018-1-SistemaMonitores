<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
<mapper namespace="edu.eci.pdsw.sampleprj.dao.mybatis.mappers.MateriaMapper">
    <select parameterType="map" id="consultaMateriaGeneral" resultMap="MateriaResult">
        select
            materia.materia_id,
            materia.materia_nombre as m_nombre,
            materia.materia_nemonico as m_nemonico,
            materia.creditos as m_creditos,
            materia.horas_monitoria_curso as m_horas_monitoria_curso,
            
            tema.temaId,
            tema.topic as tema_topic,
            tema.Descripcion as tema_Descripcion
        
        FROM materia join tema on (tema.materia_materia_id = materia.materia_id)
        <if test="codId != null" >
            where materia.materia_id = #{codId}
        </if>
        
    </select>

<!--    <insert id="insertarMateria" parameterType="map" useGeneratedKey="true" keyProperty="materia_id">
        INSERT INTO MATERIA (materia_id,materia_nombre,materia_nemonico,creditos,horas_monitorias_curso)
        VALUES (#{materia.materia_nombre},#{materia.materia_nemonico},#{materia.creditos},#{})
    </insert>-->

    <resultMap type='Materia' id='MateriaResult'>
        <id property='materiaID' column='materia_id'></id>
        <result property='nombre' column='m_nombre'></result>
        <result property='nemonico' column='m_nemonico'></result>
        <result property='creditos' column='m_creditos'></result>
        <result property='horas' column='m_horas_monitoria_curso'></result>
        <collection property="temas" ofType="Tema" resultMap="edu.eci.pdsw.sampleprj.dao.mybatis.mappers.TemaMapper.TemaResult"/>
    </resultMap>

</mapper>
