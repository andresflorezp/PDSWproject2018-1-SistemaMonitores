<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  
  
<mapper namespace="edu.eci.pdsw.sampleprj.dao.mybatis.mappers.MateriaMapper">
    <select parameterType="map" id="consultarMateria" resultMap="MateriaResult">
        select
            materia.materia_id,
            materia.materia_nombre as m_nombre,
            materia.materia_nemonico as m_nemonico,
            materia.creditos as m_creditos,
            materia.horas_monitoria_curso as m_horas_monitoria_curso,

            tema.temaID tema_temaID,
            tema.topic as tema_topic,
            tema.descripcion as tema_descripcion,

            grupo.grupoID,
            grupo.grupo_nombre as gr_grupo_nombre,
            grupo.numeroEstudiante as gr_numeroestudiante,

        FROM materia join tema on (tema.materia_materia_id = materia.materia_id)
            join grupo on (grupo.materia_materia_id = materia.materia_id)
        where materia.materia_id = #{codId}
    </select>

<!--    <insert id="insertarMateria" parameterType="map" useGeneratedKey="true" keyProperty="materia_id">
        INSERT INTO MATERIA (materia_id,materia_nombre,materia_nemonico,creditos,horas_monitorias_curso)
        VALUES (#{materia.materia_nombre},#{materia.materia_nemonico},#{materia.creditos},#{})
    </insert>-->

    <resultMap type='Materia' id='MateriaResult'>
        <id property='codigo' column='materia_id'></id>
        <result property='nombre' column='m_nombre'></result>
        <result property='nemonico' column='m_nemonico'></result>
        <result property='creditos' column='m_creditos'></result>
        <result property='horas' column='m_horas_monitoria_curso'></result>
        <collection property="temas" ofType="Tema" resultMap="edu.eci.pdsw.sampleprj.dao.mybatis.mappers.TemaMapper.TemaResult"/>
    </resultMap>

</mapper>
